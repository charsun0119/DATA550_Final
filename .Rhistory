here::i_am("subproject1/code/01_make_table1.r")
data <- readRDS(
file = here::here("data", "data_clean.rds")
)
library(gtsummary)
table_one <- data |>
select("region", "env_length", "ab_resistance", "number_glycans") |>
tbl_summary(by = number_glycans) |>
modify_spanning_header(c("stat_1", "stat_2") ~ "**PNGs in Glycan Shield**") |>
add_overall() |>
add_p()
saveRDS(
table_one,
file = here::here("subproject1", "output", "table_one.rds")
)
here::i_am("subproject1/code/02_make_scatter.r")
data <- readRDS(
file = here::here("data", "data_clean.rds")
)
library(ggplot2)
scatterplot <-
ggplot(data, aes(x = shield_glycans, y = ab_resistance)) +
geom_point() +
geom_smooth(method = lm) +
theme_bw()
ggsave(
file = here::here("subproject1", "output", "scatter.png"),
plot = scatterplot,
device = "png"
)
here::i_am("subproject1/report.rmd")
readRDS(
file = here::here("subproject1", "output", "table_one.rds")
)
#| fig.align = "center",
#| out.width = "600px"
knitr::include_graphics(
here::here("subproject1", "output", "scatter.png")
)
here::i_am("subproject2/code/01_models.r")
data <- readRDS(
file = here::here("data", "data_clean.rds")
)
library(gtsummary)
mod <- glm(
ab_resistance ~ shield_glycans + region + env_length,
data = data
)
primary_regression_table <-
tbl_regression(mod) |>
add_global_p()
binary_mod <- glm(
I(ab_resistance > 1) ~ shield_glycans + region + env_length,
data = data,
family = binomial()
)
secondary_regression_table <-
tbl_regression(binary_mod, exponentiate = TRUE) |>
add_global_p()
both_regression_tables <- list(
primary = primary_regression_table,
secondary = secondary_regression_table
)
saveRDS(
both_regression_tables,
file =here::here("subproject2", "output", "model_one.rds")
)
both_regression_tables <- readRDS(
file = here::here("subproject2", "output", "model_one.rds")
)
both_regression_tables$primary
here::i_am("project3/combined_report.rmd")
data <- readRDS(
file = here::here("data", "data_clean.rds")
)
here::i_am("combined_report.rmd")
data <- readRDS(
file = here::here("data", "data_clean.rds")
)
here::i_am("render_combined_report.R")
library(rmarkdown)
render("combined_report.Rmd")
opts_chunk$set(
echo = FALSE, warning = FALSE, message = FALSE
)
library(labelled)
knitr::opts_chunk$set(echo = FALSE, warning = FALSE, message = FALSE)
knitr::opts_chunk$set(echo = FALSE, warning = FALSE, message = FALSE)
library(dplyr)
library(gtsummary)
library(labelled)
library(gt)
library(tidyr)
library(ggplot2)
here::i_am("Indicator_Report.rmd")
Anxiety_depression_data_url <- "https://data.cdc.gov/api/views/8pt5-q6wp/rows.csv"
data <- read.csv(Anxiety_depression_data_url, header=TRUE)
here::i_am("code/table/table_1a.r")
here::i_am("code/table/table_1a.r")
setwd("C:/Users/swyy1/OneDrive - Emory/DATA550/Final/DATA550_Final")
here::i_am("code/table/table_1a.r")
data <- read.csv(
file = here::here("data", "Indicators_of_Anxiety_or_Depression_Based_on_Reported_Frequency_of_Symptoms_During_Last_7_Days.csv")
)
saveRDS(
table_1a,
file = here::here("output", "table_1a.rds")
)
here::i_am("code/table/table_1a.r")
data <- read.csv(
file = here::here("data", "Indicators_of_Anxiety_or_Depression_Based_on_Reported_Frequency_of_Symptoms_During_Last_7_Days.csv")
)
df$Year <- ifelse(grepl("2020", df$`Time.Period.Label`), "2020",
ifelse(grepl("2021", df$`Time.Period.Label`), "2021",
ifelse(grepl("2022", df$`Time.Period.Label`), "2022",
ifelse(grepl("2023", df$`Time.Period.Label`), "2023",
ifelse(grepl("2024", df$`Time.Period.Label`), "2024", "Other")))))
here::i_am("code/table/table_1a.r")
data <- read.csv(
file = here::here("data", "Indicators_of_Anxiety_or_Depression_Based_on_Reported_Frequency_of_Symptoms_During_Last_7_Days.csv")
)
library(dplyr)
library(gtsummary)
library(labelled)
library(gt)
library(tidyr)
library(ggplot2)
df$Year <- ifelse(grepl("2020", df$`Time.Period.Label`), "2020",
ifelse(grepl("2021", df$`Time.Period.Label`), "2021",
ifelse(grepl("2022", df$`Time.Period.Label`), "2022",
ifelse(grepl("2023", df$`Time.Period.Label`), "2023",
ifelse(grepl("2024", df$`Time.Period.Label`), "2024", "Other")))))
knitr::opts_chunk$set(echo = TRUE, message=FALSE, warning=FALSE)
library(dplyr)
library(gtsummary)
library(labelled)
library(gt)
library(tidyr)
library(ggplot2)
df$Year <- ifelse(grepl("2020", df$`Time.Period.Label`), "2020",
ifelse(grepl("2021", df$`Time.Period.Label`), "2021",
ifelse(grepl("2022", df$`Time.Period.Label`), "2022",
ifelse(grepl("2023", df$`Time.Period.Label`), "2023",
ifelse(grepl("2024", df$`Time.Period.Label`), "2024", "Other")))))
here::i_am("code/table/table_1a.r")
df <- read.csv(
file = here::here("data", "Indicators_of_Anxiety_or_Depression_Based_on_Reported_Frequency_of_Symptoms_During_Last_7_Days.csv")
)
library(dplyr)
library(gtsummary)
library(labelled)
library(gt)
library(tidyr)
library(ggplot2)
df$Year <- ifelse(grepl("2020", df$`Time.Period.Label`), "2020",
ifelse(grepl("2021", df$`Time.Period.Label`), "2021",
ifelse(grepl("2022", df$`Time.Period.Label`), "2022",
ifelse(grepl("2023", df$`Time.Period.Label`), "2023",
ifelse(grepl("2024", df$`Time.Period.Label`), "2024", "Other")))))
df_table1 <- df %>%
group_by(Year, Indicator) %>%
summarise(mean_score = mean(Value, na.rm = TRUE)) %>%
pivot_wider(names_from = Year, values_from = mean_score)
df_table1 %>%
gt(rowname_col = "Indicator") %>%
tab_spanner(
label = "U.S. National Mean severity score, 2020-2024",
columns = -Indicator
) %>%
fmt_number(columns = -Indicator, decimals = 2)
saveRDS(
table_1a,
file = here::here("output", "table_1a.rds")
)
table_1a %>%
gt(rowname_col = "Indicator") %>%
tab_spanner(
label = "U.S. National Mean severity score, 2020-2024",
columns = -Indicator
) %>%
fmt_number(columns = -Indicator, decimals = 2)
here::i_am("code/table/table_1a.r")
df <- read.csv(
file = here::here("data", "Indicators_of_Anxiety_or_Depression_Based_on_Reported_Frequency_of_Symptoms_During_Last_7_Days.csv")
)
library(dplyr)
library(gtsummary)
library(labelled)
library(gt)
library(tidyr)
library(ggplot2)
df$Year <- ifelse(grepl("2020", df$`Time.Period.Label`), "2020",
ifelse(grepl("2021", df$`Time.Period.Label`), "2021",
ifelse(grepl("2022", df$`Time.Period.Label`), "2022",
ifelse(grepl("2023", df$`Time.Period.Label`), "2023",
ifelse(grepl("2024", df$`Time.Period.Label`), "2024", "Other")))))
table_1a <- df %>%
group_by(Year, Indicator) %>%
summarise(mean_score = mean(Value, na.rm = TRUE)) %>%
pivot_wider(names_from = Year, values_from = mean_score)
table_1a %>%
gt(rowname_col = "Indicator") %>%
tab_spanner(
label = "U.S. National Mean severity score, 2020-2024",
columns = -Indicator
) %>%
fmt_number(columns = -Indicator, decimals = 2)
saveRDS(
table_1a,
file = here::here("output", "table_1a.rds")
)
saveRDS(
table_1a,
file = here::here("outputs", "table_1a.rds")
)
table_1a <- readRDS(
here::here("outputs/table_1a.rds")
)
table_1a <- readRDS(
here::here("outputs/table_1a.rds")
)
table_1a
table_1a <- readRDS(
here::here("outputs/table_1a.rds")
)
knitr::opts_chunk$set(warning = FALSE, message = FALSE)
library(dplyr)
library(gtsummary)
library(labelled)
library(gt)
library(tidyr)
library(ggplot2)
table_1a <- readRDS(
here::here("outputs/table_1a.rds")
)
saveRDS(
table_1b,
file = here::here("outputs", "table_1b.rds")
)
here::i_am("code/table/table_1b.r")
df <- read.csv(
file = here::here("data", "Indicators_of_Anxiety_or_Depression_Based_on_Reported_Frequency_of_Symptoms_During_Last_7_Days.csv")
)
library(dplyr)
library(gtsummary)
library(labelled)
library(gt)
library(tidyr)
library(ggplot2)
df$Year <- ifelse(grepl("2020", df$`Time.Period.Label`), "2020",
ifelse(grepl("2021", df$`Time.Period.Label`), "2021",
ifelse(grepl("2022", df$`Time.Period.Label`), "2022",
ifelse(grepl("2023", df$`Time.Period.Label`), "2023",
ifelse(grepl("2024", df$`Time.Period.Label`), "2024", "Other")))))
table_1b <- df %>%
filter(State == "Georgia") %>%
group_by(Year, Indicator) %>%
summarise(mean_score = mean(Value, na.rm = TRUE)) %>%
pivot_wider(names_from = Year, values_from = mean_score)
table_1b %>%
gt(rowname_col = "Indicator") %>%
tab_spanner(
label = "National Mean severity score in GA, 2020-2024",
columns = -Indicator
) %>%
fmt_number(columns = -Indicator, decimals = 2)
saveRDS(
table_1b,
file = here::here("outputs", "table_1b.rds")
)
knitr::opts_chunk$set(echo = FALSE, warning = FALSE, message = FALSE)
library(dplyr)
library(gtsummary)
library(labelled)
library(gt)
library(tidyr)
library(ggplot2)
table_1b <- readRDS(
here::here("outputs/table_1b.rds")
)
here::i_am("code/code/figure_1.r")
here::i_am("code/figure/figure_1.r")
here::i_am("code/figure/figure_1.r")
library(dplyr)
library(gtsummary)
library(labelled)
library(gt)
library(tidyr)
library(ggplot2)
df <- read.csv(
file = here::here("data", "Indicators_of_Anxiety_or_Depression_Based_on_Reported_Frequency_of_Symptoms_During_Last_7_Days.csv")
)
df_figure1 <- df %>%
filter(Group == "By Age", Year == "2020") %>%
group_by(Year, Indicator, Subgroup) %>%
summarise(mean_score = mean(Value, na.rm = TRUE)) %>%
pivot_wider(names_from = Year, values_from = mean_score)
View(df)
View(df)
here::i_am("code/figure/figure_1.r")
library(dplyr)
library(gtsummary)
library(labelled)
library(gt)
library(tidyr)
library(ggplot2)
df <- read.csv(
file = here::here("data", "Indicators_of_Anxiety_or_Depression_Based_on_Reported_Frequency_of_Symptoms_During_Last_7_Days.csv")
)
df$Year <- ifelse(grepl("2020", df$`Time.Period.Label`), "2020",
ifelse(grepl("2021", df$`Time.Period.Label`), "2021",
ifelse(grepl("2022", df$`Time.Period.Label`), "2022",
ifelse(grepl("2023", df$`Time.Period.Label`), "2023",
ifelse(grepl("2024", df$`Time.Period.Label`), "2024", "Other")))))
df_figure1 <- df %>%
filter(Group == "By Age", Year == "2020") %>%
group_by(Year, Indicator, Subgroup) %>%
summarise(mean_score = mean(Value, na.rm = TRUE)) %>%
pivot_wider(names_from = Year, values_from = mean_score)
figure_1a %>%
filter(Indicator == "Symptoms of Depressive Disorder") %>%
ggplot(aes(x = Subgroup, y = `2020`)) +
geom_col(fill = "steelblue") +
labs(
title = "National Mean Scores for Self-reported Symptoms\nof Depression among Age Groups(2020)",
x = "Age Group",
y = "Mean Score") +
theme(plot.title = element_text(hjust = 0.5))
figure_1b <-  df_figure1 %>%
filter(Indicator == "Symptoms of Anxiety Disorder") %>%
ggplot(aes(x = Subgroup, y = `2020`)) +
geom_col(fill = "steelblue") +
labs(
title = "National Mean Scores for Self-reported Symptoms\nof Anxiety among Age Groups(2020)",
x = "Age Group",
y = "Mean Score") +
theme(plot.title = element_text(hjust = 0.5))
here::i_am("code/figure/figure_1.r")
library(dplyr)
library(gtsummary)
library(labelled)
library(gt)
library(tidyr)
library(ggplot2)
df <- read.csv(
file = here::here("data", "Indicators_of_Anxiety_or_Depression_Based_on_Reported_Frequency_of_Symptoms_During_Last_7_Days.csv")
)
df$Year <- ifelse(grepl("2020", df$`Time.Period.Label`), "2020",
ifelse(grepl("2021", df$`Time.Period.Label`), "2021",
ifelse(grepl("2022", df$`Time.Period.Label`), "2022",
ifelse(grepl("2023", df$`Time.Period.Label`), "2023",
ifelse(grepl("2024", df$`Time.Period.Label`), "2024", "Other")))))
df_figure1 <- df %>%
filter(Group == "By Age", Year == "2020") %>%
group_by(Year, Indicator, Subgroup) %>%
summarise(mean_score = mean(Value, na.rm = TRUE)) %>%
pivot_wider(names_from = Year, values_from = mean_score)
figure_1a <- df_figure1 %>%
filter(Indicator == "Symptoms of Depressive Disorder") %>%
ggplot(aes(x = Subgroup, y = `2020`)) +
geom_col(fill = "steelblue") +
labs(
title = "National Mean Scores for Self-reported Symptoms\nof Depression among Age Groups(2020)",
x = "Age Group",
y = "Mean Score") +
theme(plot.title = element_text(hjust = 0.5))
ggsave(
file = here::here("output", "figure_1a.png"),
plot = figure_1a,
device = "png"
)
ggsave(
file = here::here("outputs", "figure_1a.png"),
plot = figure_1a,
device = "png"
)
ggsave(
file = here::here("outputs", "figure_1b.png"),
plot = figure_1b,
device = "png"
)
ggsave(
file = here::here("outputs", "figure_1c.png"),
plot = figure_1c,
device = "png"
)
figure_1c <- df_figure1 %>%
filter(Indicator == "Symptoms of Anxiety Disorder or Depressive Disorder") %>%
ggplot(aes(x = Subgroup, y = `2020`)) +
geom_col(fill = "steelblue") +
labs(
title = "National Mean Scores for Self-reported Symptoms\nof Depression or Anxity among Age Groups(2020)",
x = "Age Group",
y = "Mean Score") +
theme(plot.title = element_text(hjust = 0.5))
ggsave(
file = here::here("outputs", "figure_1c.png"),
plot = figure_1c,
device = "png"
)
#| fig.align = "center",
#| out.width = "600px"
knitr::include_graphics(
here::here("outputs", "figure_1a.png")
)
knitr::include_graphics(
here::here("outputs", "figure_1c.png")
)
